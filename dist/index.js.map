{"version":3,"sources":["../src/index.js"],"names":["See3D","dom","document","createElement","__dom","__ctx","getContext","loadGlobal","bindLibrary","sout","IO","$sostream","w","width","height","window","innerWidth","innerHeight","__loads","i","load","name","lib","defines","__libraries","get","entry","console","log","set","push","globalThis","version","DEBUG","Map","Library","val","private","error","Error","LibraryDefineObject","type","checkType","obj","translate","transType"],"mappings":"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","file":"index.js","sourcesContent":["/*!\n\n * See3D 3D Rendering Engine Library\n\n * yhzheng - v0.0.1 (Wed Feb 27 2019 22:22:36 GMT+0800)\n\n * https://github.com/qianduanXIAOHAOZI/see3D/tree/master | Released under MIT license\n\n */\n/**\n * @file index.js\n * @overview 提供整体接口\n */\n\n// const DEBUG = true;\n\n/**\n * @class See3D\n * @constructor\n * @desc See3D类是可以将一个canvas变为See3D画布的类，一切操作都依靠它 \\n\n * 也是所有See3D API的容器，相当于一个module\n */\nclass See3D {\n    constructor(dom = document.createElement(\"canvas\")) {\n        this.__dom = dom;\n        this.__ctx = dom.getContext(\"2d\");\n        this.loadGlobal();\n        this.bindLibrary(\"IO\");\n        this.bindLibrary(\"Math3D\");\n        this.sout = new See3D.IO.$sostream(this);\n    }\n    width(w) {\n        if (w === void(0)) {\n            return this.__dom.width;\n        }\n        this.__dom.width = w;\n        return this;\n    }\n    height(w) {\n        if (w === void(0)) {\n            return this.__dom.height;\n        }\n        this.__dom.height = w;\n        return this;\n    }\n    full() {\n        this\n            .width(window.innerWidth)\n            .height(window.innerHeight)\n        ;\n        return this;\n    }\n    /**\n     * @function loadGlobal\n     * @desc 将所有全局库加载入该See3D实例\n     */\n    loadGlobal() {\n        for (let i of See3D.__loads) {\n            this.load(i);\n        }\n        return this;\n    }\n    bindLibrary(name) {// 将该库的所有API加入该See3D实例\n        let lib = this[name];\n        for (let i in lib.defines) {\n            this[i] = lib.defines[i];\n        }\n    }\n    /**\n     * @function load\n     * @param {string} name\n     * @desc 加载指定库到See3D对象中\n     */\n    load(name) {\n        this[name] = See3D.__libraries.get(name);\n        return this;\n    }\n    get dom() {\n        return this.__dom;\n    }\n    get ctx() {\n        return this.__ctx;\n    }\n    /**\n     * @function library\n     * @param {See3D.Library} entry\n     * @desc 添加See3D库\n     */\n    static library(entry) {\n        // entry\n        console.log(\"%cSee3D library %s loaded.\", \"color:#FF1493\", entry.name);\n        See3D.__libraries.set(entry.name, entry);\n    }\n    /**\n     * @function load\n     * @param {String} name\n     * @desc 添加应默认自带的库\n     */\n    static load(name) {\n        console.log(\"%cSee3D library %s added to See3D global.\", \"color:#C71585\", name);\n        See3D.__loads.push(name);\n    }\n    /**\n     * @function loadGlobal\n     * @param {String} name\n     * @desc 将该库导入到全局环境\n     */\n    static loadGlobal(name) {\n        globalThis[name] = See3D.__libraries.get(name);\n    }\n    static lib(name) {\n        See3D[name] = See3D.__libraries.get(name);\n        return See3D.__libraries.get(name);\n    }\n}\n\n!function () {\n    See3D.version = \"v0.0.1\";\n    console.log(\"See3D engine (%s) launched\", See3D.version);\n    See3D.DEBUG = true;\n    /**\n     * @property\n     * @private\n     */\n    See3D.__libraries = new Map();\n    /**\n     * @property\n     * @private\n     */\n    See3D.__loads = [];\n\n    /**\n     * @class Library\n     * @constructor\n     * @desc Library类提供了制作See3D类的接口\n     */\n    class Library {\n        constructor(name) {\n            this.name = name;\n            this.defines = {};\n        }\n        define(name, val) {\n            this.defines[name] = val;\n            return this;\n        }\n        get(name) {\n            if (this.defines[name].private) {\n                console.error(new Error(\"Error 99: It's a private value\"));\n            }\n            return this.defines[name];\n        }\n        trans() {\n            for (let i in this.defines) {\n                this[\"$\" + i] = this.defines[i];\n            }\n        }\n        global() {\n            for (let i in this.defines) {\n                globalThis[i] = this.defines[i];\n            }\n        }\n    }\n    // 所有的See3D库类接口都必须继承自该类\n    class LibraryDefineObject {\n        constructor(type) {\n            this.type = type;\n        }\n        transType() {\n            return null;\n        }\n    }\n    function checkType(obj, type) {\n        return obj.type == type;\n    }\n    function translate(type, obj) {\n        return obj.transType(type);\n    }\n    See3D.Library = Library;\n    See3D.LibraryDefineObject = LibraryDefineObject;\n    See3D.checkType = checkType;\n    See3D.translate = translate;\n}();"]}