{"version":3,"sources":["../src/item.js"],"names":["lib","See3D","Library","Item","p","Vector3","Zero","r","position","rotation","d","tmp","Vector","push","res","Matrix","TransMove","get","LibraryDefineObject","Scene","name","game","items","cameras","use","__name","item","type","c","cn","render","noView","ctx","dom","Camera","scene","sw","width","sh","height","FOV_x","FOV_y","itemPoints","move","TransMoveInverse","rotate","TransRotate","x","y","z","trans","Math","max","tan","near_d","far_d","i","length","array","screenPos","Vector2","beginPath","arc","PI","fillStyle","fill","closePath","ITEM_CONFIG","entity","s","withItemConfig","planes","points","load","config","arrN","arrP0","Plane3D","Point","size","Cube","define","library","DEBUG","loadGlobal","global","toSee3D"],"mappings":"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","file":"item.js","sourcesContent":["'bpo enable';\n\n!function () {\n    let lib = new See3D.Library(\"View\");\n\n    class Item extends See3D.LibraryDefineObject {\n        constructor(p = See3D.Vector3.Zero(), r = See3D.Vector3.Zero()) {\n            super(\"Item\");\n            this.position = p;\n            this.rotation = r;\n        }\n        move(d) {\n            let tmp = new Vector(this.position);\n            tmp.push(1);\n            let res = tmp * See3D.Matrix.TransMove(d);\n            this.position = new Vector3(res.get(0), res.get(1), res.get(2));\n            // console.log(this.position);\n        }\n        rotate(r) {\n            this.rotation = new Vector3(this.rotation.get(0) + r.get(0), this.rotation.get(1) + r.get(1), this.rotation.get(2) + r.get(2));\n        }\n    }\n    class Scene extends See3D.LibraryDefineObject {\n        constructor(name, game) {\n            super(\"Scene\");\n            this.game = game;\n            this.items = [];\n            this.cameras = {};\n            this.use = null;\n            this.__name = name;\n        }\n        get name() {\n            return this.__name;\n        }\n        push(item) {\n            if (item.type == \"Camera\") {\n                let c = item;\n                this.cameras[c.name] = c;\n                if (!this.use) this.use = c;\n            } else {\n                this.items.push(item);\n            }\n            return this;\n        }\n        get ctx() {\n            return this.game.ctx;\n        }\n        get dom() {\n            return this.game.dom;\n        }\n        camera(cn) {\n            this.use = this.cameras[cn];\n            return this;\n        }\n        render() {\n            if (this.use) {\n                this.use.render();\n            } else {\n                this.noView();\n            }\n            return this;\n        }\n        noView() {\n            this.game.noView();\n            return this;\n        }\n    }\n    class Camera extends Item {\n        constructor(p, r, name, scene) {\n            super(p, r);\n            this.type = \"Camera\";\n            this.scene = scene;\n            this.__name = name;\n        }\n        render() {\n            let items = this.scene.items;\n            let ctx = this.scene.ctx;\n            let {width: sw, height: sh} = this.scene.dom;\n            let {FOV_x, FOV_y} = See3D;\n            let itemPoints = [];\n            let move = See3D.Matrix.TransMoveInverse(this.position);\n            let rotate = See3D.Matrix.TransRotate(new See3D.Vector3(\n                -this.rotation.x, -this.rotation.y, -this.rotation.z\n            ));\n            let trans = move * rotate;\n            let d = Math.max(\n                sw / 100 / (2 * Math.tan(FOV_x / 2)),\n                sh / 100 / (2 * Math.tan(FOV_y / 2))\n            );\n            let near_d = 0.1;\n            let far_d = 1000;\n            // console.log(d);\n            // console.log(\"update\");\n            for (let i = 0; i < items.length; i++) {\n                let p = new See3D.Vector3(items[i].position);\n                p.array.push(1);\n                itemPoints.push(p * trans);\n            }\n            // console.log(itemPoints);\n            for (let i = 0; i < itemPoints.length; i++) {\n                // console.log(itemPoints[i].get(2));\n                if (itemPoints[i].get(2) < near_d || itemPoints[i].get(2) > far_d) continue;// 超出远近裁面\n                // console.log(itemPoints[i]);\n                if (items[i].type == \"Point\") {\n                    let screenPos = new See3D.Vector2(\n                        itemPoints[i].get(0) * d / itemPoints[i].get(2) * 100,\n                        -itemPoints[i].get(1) * d / itemPoints[i].get(2) * 100,// 因为在canvas上向下y坐标增加，和数学上相反，所以需要取反操作\n                    );\n                    ctx.beginPath();\n                    ctx.arc(screenPos.x, screenPos.y, items[i].r, 0, Math.PI * 2);\n                    ctx.fillStyle = \"#fff\";\n                    ctx.fill();\n                    ctx.closePath();\n                }\n                // console.log(screenPos);\n            }\n            return this;\n        }\n        get name() {\n            return this.__name;\n        }\n    }\n\n    let ITEM_CONFIG = {\n        \"Cube\": {\n            \"Points\": [\n                [1, 1, 1],\n                [1, 1, -1],\n                [1, -1, 1],\n                [1, -1, -1],\n                [-1, 1, 1],\n                [-1, 1, -1],\n                [-1, -1, 1],\n                [-1, -1, -1],\n            ],\n            \"Planes\": [\n                {\n                    \"n\": [1, 0, 0],\n                    \"p0\": [1, 0, 0]\n                },\n                {\n                    \"n\": [-1, 0, 0],\n                    \"p0\": [-1, 0, 0]\n                },\n                {\n                    \"n\": [0, 1, 0],\n                    \"p0\": [0, 1, 0]\n                },\n                {\n                    \"n\": [0, -1, 0],\n                    \"p0\": [0, -1, 0]\n                },\n                {\n                    \"n\": [0, 0, 1],\n                    \"p0\": [0, 0, 1]\n                },\n                {\n                    \"n\": [0, 0, -1],\n                    \"p0\": [0, 0, -1]\n                },\n            ]\n        }\n    };\n\n    class entity extends Item {\n        constructor(type, p, r, s, withItemConfig = true) {\n            super(p, r);\n            this.type = type;\n            this.planes = [];\n            this.points = [];\n            this.s = s;\n            if (withItemConfig) {\n                this.load();\n            }\n        }\n        load() {\n            let config = ITEM_CONFIG[this.type];\n            for (let i = 0; i < config[\"Points\"].length; i++) {\n                this.points.push(new See3D.Vector3(...config[\"Points\"][i]));\n            }\n            for (let i = 0; i < config[\"Planes\"].length; i++) {\n                let arrN = config[\"Planes\"][i][\"n\"];\n                let arrP0 = config[\"Planes\"][i][\"p0\"];\n                arrN[0] *= this.s.get(0);\n                arrN[1] *= this.s.get(1);\n                arrN[2] *= this.s.get(2);\n                arrP0[0] *= this.s.get(0);\n                arrP0[1] *= this.s.get(1);\n                arrP0[2] *= this.s.get(2);\n                this.planes.push(new See3D.Plane3D(\n                    new Vector3(...arrN),\n                    new Vector3(...arrP0),\n                ));\n            }\n        }\n    }\n\n    class Point extends entity {\n        constructor(p = See3D.Vector3.Zero(), size = 10) {\n            super(\"Point\", p, null, See3D.Vector3.Zero(), false);\n            this.r = size;\n        }\n    }\n    class Cube extends entity {\n        constructor(p = See3D.Vector3.Zero(), r = See3D.Vector3.Zero(), s = new See3D.Vector3(1, 1, 1)) {\n            super(\"Cube\", p, r, s);\n        }\n    }\n\n    lib.define(\"Item\", Item);// virtual\n\n    lib.define(\"Scene\", Scene);\n    lib.define(\"Camera\", Camera);// renderer\n\n    lib.define(\"entity\", entity);// virtual\n\n    lib.define(\"ITEM_CONFIG\", ITEM_CONFIG);\n    lib.define(\"Point\", Point);\n    lib.define(\"Cube\", Cube);\n\n    lib.trans();\n    See3D.library(lib);\n    See3D.load(\"View\");\n    if (See3D.DEBUG) {\n        See3D.loadGlobal(\"Math3D\");// 将库加入浏览器全局\n        lib.global();// 将库API加入浏览器全局\n    }\n    See3D.lib(\"View\");\n    lib.toSee3D();\n}();"]}