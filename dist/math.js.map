{"version":3,"sources":["../src/math.js"],"names":["String","prototype","last","length","See3D","lib","Library","Point2D","x","y","__x","__y","binding","n","rx","ry","Point3D","z","p","undefined","v","Math","sqrt","mod","ta","tb","w","s","SSX","sin","CSX","cos","CSY","SSY","CSZ","SSZ","define","toSee3D","global"],"mappings":"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","file":"math.js","sourcesContent":["/** todo 为String类型添加方法 */\n!function () {\n    String.prototype.last = function () {\n        return this[this.length - 1];\n    };\n}();\n\n/** todo 新建一个Math3D库 */\n!function (See3D) {\n    let lib = new See3D.Library(\"Math3D\");// 生成一个新的See3D库\n\n    class Point2D {\n        constructor(x = 0, y = 0) {\n            this.__x = x;\n            this.__y = y;\n            this.binding = null;\n        }\n        inverse() {\n            return new Point2D(-this.x, -this.y);\n        }\n        get x() { return this.__x; }\n        get y() { return this.__y; }\n        set x(n) { if (this.binding) this.binding.rx(n); return this.__x = n; }\n        set y(n) { if (this.binding) this.binding.ry(n); return this.__y = n; }\n    }\n\n    class Point3D {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        add(p) {\n            if (p === undefined) debugger;\n            return new Point3D(p.x + this.x, p.y + this.y, p.z + this.z);\n        }\n        addTo(p) {\n            this.x += p.x;\n            this.y += p.y;\n            this.z += p.z;\n            return this;\n        }\n        sub(p) {\n            return new Point3D(this.x - p.x, this.y - p.y, this.z - p.z);\n        }\n        subTo(p) {\n            this.x -= p.x;\n            this.y -= p.y;\n            this.z -= p.z;\n            return this;\n        }\n        mul(v) {\n            return this.x * v.x + this.y * v.y + this.z * v.z;\n        }\n        mul_(v) {\n            return new Point3D(this.x * v.x, this.y * v.y, this.z * v.z);\n        }\n        mod() {\n            return Math.sqrt(this.x ** 2 + this.y ** 2 + this.z ** 2);\n        }\n        mod2() {\n            return this.x ** 2 + this.y ** 2 + this.z ** 2;\n        }\n        norm() {\n            let mod = this.mod();\n            return new Point3D(\n                this.x / mod,\n                this.y / mod,\n                this.z / mod,\n            );\n        }\n        inverse() {\n            return new Point3D(-this.x, -this.y, -this.z);\n        }\n        inverseTo() {\n            this.x *= -1;\n            this.y *= -1;\n            this.z *= -1;\n            return this;\n        }\n        mappingTo(ta, tb, w) {\n            return [w * this.x / (2 * this.z * ta), -w * this.y / (2 * this.z * tb)];\n            // return [this.x * 10, this.y * 10];\n        }\n        copy() { return new Point3D(this.x, this.y, this.z); }\n        rotate(s) {\n            const SSX = Math.sin(s.x);\n            const CSX = Math.cos(s.x);\n            const CSY = Math.cos(s.y);\n            const SSY = Math.sin(s.y);\n            const CSZ = Math.cos(s.z);\n            const SSZ = Math.sin(s.z);\n            return new Point3D(\n                (this.x * CSY + this.y * SSX * SSY - this.z * CSX * SSY) * CSZ + (this.y * CSX + this.z * SSX) * SSZ,\n                (this.y * CSX + this.z * SSX) * CSZ - (this.x * CSY + this.y * SSX * SSY - this.z * CSX * SSY) * SSZ,\n                this.x * SSY - this.y * SSX * CSY + this.z * CSX * CSY\n            );\n        }\n        static Zero() {\n            return new Point3D();\n        }\n    }\n\n\n    lib.define(\"Point2D\", Point2D);\n    lib.define(\"Point3D\", Point3D);\n\n    lib.toSee3D();\n    lib.global();// 将库API加入浏览器全局\n}(See3D);"]}