{"version":3,"sources":["../src/math.js"],"names":["String","prototype","last","length","See3D","lib","Library","smallest","smallestLen","probably","n","Number","toFixed","Enum","enums","i","v","LibraryDefineObject","MathSet","token","expr","arguments","str","trim","console","error","Error","substring","splitIndex","search","replace","RegExp","Boolean","eval","Interval","type","s","e","st","et","firstOp","lastOp","numbers","split","Vector","arr","array","push","val","index","sum","Math","sqrt","b","tmp","concat","a","Matrix","selfMatrix","res","mod","acos","Vector2","Vector3","Vector4","u","norm","x","y","get","set","z","w","h","fill","__w","__h","j","matrix","size","c","k","d","Mx","cos","sin","My","Mz","Matrix2x2","det","Parmline2D","v0","v1","p0","p1","v_","Parmline3D","Plane3D","PointPositionWithPlane","point","plane","hs","intersParmlines2D","pl1","pl2","p2","p0v","p2v","f","g","t1","intersParmlines3D","tInterval","intersParmlinePlane","parmline","x0","y0","z0","vx","vy","vz","t","log","intersSegmentPlane","have","Quaternion","q0","q1","q2","q3","q","qv","p","r","b_","reciprocal","conjugate","mod2","theta","V","__Q_x_theta","__Q_y_theta","__Q_z_theta","Q_z_theta","Q_y_theta","Q_x_theta","q_theta","q_v","Polar2D","Cylindrical3D","Spherical3D","rho","phi","polar2DToRect2D","polar","rect2DToPolar2D","atan","cylindrical3DToRect3D","cylindrical","rect3DToCylindrical3D","spherical3DToRect3D","spherical","rect3DToSpherical3D","d1","d2","define","trans","library","load","loadGlobal","global","toSee3D"],"mappings":"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","file":"math.js","sourcesContent":["'bpo enable';\n\n/** todo 为String类型添加方法 */\n!function () {\n    String.prototype.last = function () {\n        return this[this.length - 1];\n    };\n}();\n\n/** todo 新建一个Math3D库 */\n!function (See3D) {\n    let lib = new See3D.Library(\"Math3D\");// 生成一个新的See3D库\n\n    /** todo 一些关于精度问题的转化 */\n    // 支持的最小精度\n    const smallest = 1e-5;\n    const smallestLen = 5;\n\n    function probably(n) {\n        return Number(n.toFixed(smallestLen));\n    }\n\n    /** todo 枚举类型 */\n    class Enum extends See3D.LibraryDefineObject {\n        /*\n        * 使用方法:\n        * let colors = new Enum([\"RED\", \"WHITE\", \"BLACK\"])\n        */\n        constructor(enums) {\n            super(\"Enum\");\n            let n = 0;\n            for (let i in enums) {\n                let v = enums[i];\n                if (typeof v === \"object\") {\n                    n = v[1];\n                    v = v[0];\n                }\n                this[v] = n;\n                this[\"$\" + n] = v;\n                n++;\n            }\n        }\n\n        get(n) {\n            return this[\"$\" + n];\n        }\n    }\n\n    /** todo 提供数学意义上的集合类 */\n    // {(token) | expr}\n    class MathSet extends See3D.LibraryDefineObject {\n        constructor(token, expr) {\n            super(\"MathSet\");\n            if (arguments.length == 1) {// 只有一个参数\n                let str = token;\n                str = str.trim();\n                if (\n                    str.length <= 2 ||\n                    str[0] != \"{\" || str.last() != \"}\" // 不以'{'开头或不以'}'结尾\n                ) {\n                    console.error(new Error(\"Error 104: Illegal set string '\" + str + \"'\"));\n                    return;\n                }\n                str = str.substring(1, str.length - 1);\n                token = \"\";\n\n                let splitIndex = str.search(/\\|/);\n                if (splitIndex < 0) {\n                    console.error(new Error(\"Error 104: Illegal set string '\" + str + \"'\"));\n                    return;\n                }\n\n                // 获取token\n                for (let i = 0; i < splitIndex; i++) {\n                    token += str[i];\n                }\n                token = token.trim();\n\n                expr = \"\";\n                // 获取expr\n                for (let i = splitIndex + 1; i < str.length; i++) {\n                    expr += str[i];\n                }\n            }\n            this.token = token;\n            this.expr = expr;\n        }\n        have(n) {\n            let expr = this.expr.replace(new RegExp(\"([^a-zA-Z_])\" + this.token + \"([^a-zA-Z_])\", \"g\"), \"$1\" + n + \"$2\");\n            return Boolean(eval(expr));\n        }\n    }\n\n    /** todo 提供区间类 */\n    class Interval extends MathSet {\n        constructor(type, s, e) {\n            // super(\"Interval\");\n            let st, et;// 存储是开还是闭\n            const token = \"n\";// 变量名, {x | a < x < b}\n            let expr = \"\";\n            let firstOp, lastOp;\n            if (arguments.length == 1) {// 只有一个参数\n                let str = type;\n                str = str.trim();\n                st = str[0];\n                et = str.last();\n\n                // 检查类型\n                if (st != \"[\" && st != \"(\") {\n                    console.error(new Error(\"Error 103: Illegal interval identifier '\" + st + \"'\"));\n                    return;\n                }\n                if (et != \"]\" && et != \")\") {\n                    console.error(new Error(\"Error 103: Illegal interval identifier '\" + et + \"'\"));\n                    return;\n                }\n                str = str.substring(1, str.length - 1);\n                let numbers = str.split(\",\");\n                if (numbers.length < 2) str.split(/\\s+/g);\n                if (st == \"[\") firstOp = \"<=\";\n                if (st == \"(\") firstOp = \"<\";\n                if (et == \"]\") lastOp = \"<=\";\n                if (et == \")\") lastOp = \"<\";\n                s = numbers[0];\n                e = numbers[1];\n                expr = s + firstOp + token + \" && \" + token + lastOp + e;\n                // this.st = st;\n                // this.et = et;\n                // this.s = numbers[0];// 区间的第一个数\n                // this.e = numbers[1];// 区间的第二个数\n            } else {\n                st = type[0];\n                et = type[1];\n                // 检查类型\n                if (st != \"[\" && st != \"(\") {\n                    console.error(new Error(\"Error 103: Illegal interval identifier '\" + st + \"'\"));\n                    return;\n                }\n                if (et != \"]\" && et != \")\") {\n                    console.error(new Error(\"Error 103: Illegal interval identifier '\" + et + \"'\"));\n                    return;\n                }\n                if (st == \"[\") firstOp = \"<=\";\n                if (st == \"(\") firstOp = \"<\";\n                if (et == \"]\") lastOp = \"<=\";\n                if (et == \")\") lastOp = \"<\";\n                // console.log(firstOp, lastOp, s, e);\n                expr = String(s) + firstOp + token + \" && \" + token + lastOp + String(e);\n            }\n            super(token, expr);\n        }\n    }\n\n    /** todo 向量类 */\n    // WARNING: %代表点积, *代表叉乘\n    class Vector extends See3D.LibraryDefineObject {\n        constructor(arr) {\n            super(\"Vector\");\n            this.array = [];\n            if (arr.type && arr.type == \"Vector\") for (let i of arr.array) this.array.push(i);\n            else for (let i of arr) this.array.push(i);\n        }\n        push(val) {\n            this.array.push(val);\n        }\n        set(index, val) {\n            this.array[index] = val;\n            return this;\n        }\n        get(index) {\n            return this.array[index];\n        }\n        mod() {\n            let sum = 0;\n            for (let i of this.array) {\n                sum += i ** 2;\n            }\n            return Math.sqrt(sum);\n        }\n        get length() {\n            return this.array.length;\n        }\n        // 点积\n        operatorMod(b) {\n            if (typeof b === \"number\") {\n                console.error(new Error(\"Error 102: Do not support scalar and vector for dot product operations\"));\n                return null;\n            }\n            if (b.type === \"Vector\") {\n                if (b.length != this.length) {\n                    console.error(new Error(\"Error 100: Vector size does not match\"));\n                    return null;\n                }\n                let sum = 0;\n                for (let i in this.array) {\n                    sum += this.array[i] * b.array[i];\n                }\n                return sum;\n            }\n        }\n        operatorAdd(b) {\n            if (typeof b === \"number\") {\n                let tmp = new Vector([]);\n                tmp.array = tmp.array.concat(this.array);\n                for (let i in this.array) {\n                    tmp.array[i] += b;\n                }\n                return tmp;\n            } else {\n                if (b.type === \"Vector\") {\n                    if (b.length != this.length) {\n                        console.error(new Error(\"Error 100: Vector size does not match\"));\n                        return null;\n                    }\n                    let v = [];\n                    for (let i in this.array) {\n                        v.push(this.array[i] + b.array[i]);\n                    }\n                    return new Vector(v);\n                }\n            }\n        }\n        operatorSub(b) {\n            if (typeof b === \"number\") {\n                let tmp = new Vector([]);\n                tmp.array = tmp.array.concat(this.array);\n                for (let i in this.array) {\n                    tmp.array[i] -= b;\n                }\n                return tmp;\n            } else {\n                if (b.type === \"Vector\") {\n                    if (b.length != this.length) {\n                        console.error(new Error(\"Error 100: Vector size does not match\"));\n                        return null;\n                    }\n                    let v = [];\n                    for (let i in this.array) {\n                        v.push(this.array[i] - b.array[i]);\n                    }\n                    return new Vector(v);\n                }\n            }\n        }\n        operatorDiv(b) {\n            if (typeof b === \"number\") {\n                let tmp = new Vector([]);\n                tmp.array = tmp.array.concat(this.array);\n                for (let i in this.array) {\n                    tmp.array[i] /= b;\n                }\n                return tmp;\n            } else {\n                console.error(new Error(\"Error 102: Do not support scalar and vector for dot div operations\"));\n                return null;\n            }\n        }\n        operatorMul(b) {\n            if (typeof b === \"number\") {\n                let tmp = new Vector([]);\n                tmp.array = tmp.array.concat(this.array);\n                for (let i in this.array) {\n                    tmp.array[i] *= b;\n                }\n                return tmp;\n            } else {\n                // 叉乘\n                if (b.type == \"Vector\") {\n                    let a = new Matrix(this.length, 1, [this.array]);\n                    let arr = [];\n                    for (let i = 0; i < b.length; i++) {\n                        arr.push([b.array[i]]);\n                    }\n                    b = new Matrix(1, b.length, arr);\n                    // console.log(a);\n                    // console.log(b);\n                    return a * b;\n                }\n                if (b.type == \"Matrix\") {\n                    let selfMatrix = new Matrix(this.length, 1, [this.array]);\n                    // console.log(selfMatrix, b);\n                    let res = selfMatrix * b;\n                    return new Vector(res.array[0]);\n                }\n            }\n        }\n        operatorBinaryXor(b) {\n            if (typeof b === \"number\") {\n                console.error(new Error(\"Error 102: Do not support scalar and vector for dot product operations\"));\n                return null;\n            }\n            if (b.type === \"Vector\") {\n                let res = this % b;\n                res /= this.mod();\n                res /= b.mod();\n                res = Math.acos(res);\n                return probably(res);\n            }\n        }\n        trans(type) {\n            if (type.search(/vector/i)) {\n                if (this.length == 2) return new Vector2(...this.array);\n                if (this.length == 3) return new Vector3(...this.array);\n                if (this.length == 4) return new Vector4(...this.array);\n                return new Vector(this.array);\n            }\n        }\n        norm() {\n            return this / this.mod();\n        }\n        proj(u) {// 投影\n            let v = this.norm();\n            let n = v * (u % v);\n            return n / (v.mod() * v.mod());\n        }\n        operatorEqual(b) {\n            if (b.length != this.length) {\n                console.error(new Error(\"Error 100: Vector size does not match\"));\n                return null;\n            }\n            for (let i = 0; i < this.length; i++) {\n                if (b.array[i] != this.array[i]) return false;\n            }\n            return true;\n        }\n    }\n    class Vector2 extends Vector {\n        constructor(x = 0, y = 0) {\n            if (x.type && x.type == \"Vector\") super(x);\n            else super([x, y]);\n        }\n        get x() {\n            return this.get(0);\n        }\n        set x(n) {\n            this.set(0, n);\n            return n;\n        }\n        get y() {\n            return this.get(1);\n        }\n        set y(n) {\n            this.set(1, n);\n            return n;\n        }\n        static Zero() {\n            return new Vector2();\n        }\n    }\n    class Vector3 extends Vector {\n        constructor(x = 0, y = 0, z = 0) {\n            if (x.type && x.type == \"Vector\") super(x);\n            else super([x, y, z]);\n        }\n        get x() {\n            return this.get(0);\n        }\n        set x(n) {\n            this.set(0, n);\n            return n;\n        }\n        get y() {\n            return this.get(1);\n        }\n        set y(n) {\n            this.set(1, n);\n            return n;\n        }\n        get z() {\n            return this.get(2);\n        }\n        set z(n) {\n            this.set(2, n);\n            return n;\n        }\n        static Zero() {\n            return new Vector3();\n        }\n        // operatorMul(b) {\n        //     console.log(b);\n        //     if (typeof b === \"number\") {\n        //         let tmp = new Vector([]);\n        //         tmp.array = tmp.array.concat(this.array);\n        //         for (let i in this.array) {\n        //             tmp.array[i] *= b;\n        //         }\n        //         return tmp;\n        //     } else {\n        //         // 叉乘\n        //         // let m = new Matrix(3, 3, [\n        //         //     [new Vector3(1, 0, 0), new Vector3(0, 1, 0), new Vector3(0, 0, 1)]\n        //         // ]);\n        //         let a = new Matrix(this.length, 1, [this.array]);\n        //         console.log(a);\n        //         return null;\n        //     }\n        // }\n    }\n    class Vector4 extends Vector {\n        constructor(x = 0, y = 0, z = 0, w = 1) {\n            if (x.type && x.type == \"Vector\") super(x);\n            else super([x, y, z, w]);\n        }\n        get x() {\n            return this.get(0) / this.w;\n        }\n        set x(n) {\n            this.set(0, n);\n            return n;\n        }\n        get y() {\n            return this.get(1) / this.w;\n        }\n        set y(n) {\n            this.set(1, n);\n            return n;\n        }\n        get z() {\n            return this.get(2) / this.w;\n        }\n        set z(n) {\n            this.set(2, n);\n            return n;\n        }\n        get w() {\n            return this.get(3);\n        }\n        set w(n) {\n            this.set(3, n);\n            return n;\n        }\n        static Zero() {\n            return new Vector4();\n        }\n    }\n\n    /** todo 矩阵类 */\n    class Matrix extends See3D.LibraryDefineObject {\n        constructor(w, h, fill = 0) {\n            super(\"Matrix\");\n            this.array = [];\n            if (w.type && w.type == \"Matrix\") {// 复制构造函数\n                this.__w = w.w;\n                this.__h = w.h;\n                for (let i = 0; i < this.__h; i++) {\n                    this.array.push([]);\n                    for (let j = 0; j < this.__w; j++) {\n                        this.array[i].push(w.array[i][j]);\n                    }\n                }\n            } else {\n                this.__w = w;\n                this.__h = h;\n                for (let i = 0 ;i < h; i++) {\n                    this.array.push([]);\n                    for (let j = 0; j < w; j++) {\n                        if (typeof fill === \"number\")\n                            this.array[i].push(fill);\n                        else\n                            this.array[i].push(fill[i][j]);\n                    }\n                }\n            }\n        }\n        get w() {\n            return this.__w;\n        }\n        get h() {\n            return this.__h;\n        }\n        T() {\n            let matrix = new Matrix(this.__h, this.__w);\n            for (let i = 0 ;i < this.__w; i++) {\n                for (let j = 0; j < this.__h; j++) {\n                    matrix.array[i][j] = this.array[j][i];\n                }\n            }\n            return matrix;\n        }\n        size() {\n            return new Vector2(this.__w, this.__h);\n        }\n        get(i, j) {\n            return this.array[i][j];\n        }\n        set(i, j, v) {\n            this.array[i][j] = v;\n            return this;\n        }\n        operatorAdd(b) {\n            // console.log(this.size() == b.size());\n            if (this.size() != b.size()) {\n                console.error(new Error(\"Error 100: Matrix size does not match\"));\n                return null;\n            }\n            let c = new Matrix(this.w, this.h, this.array);\n            for (let i = 0; i < this.h; i++) {\n                for (let j = 0; j < this.w; j++) {\n                    c.array[i][j] += b.array[i][j];\n                }\n            }\n            return c;\n        }\n        operatorSub(b) {\n            // console.log(this.size() == b.size());\n            if (this.size() != b.size()) {\n                console.error(new Error(\"Error 100: Matrix size does not match\"));\n                return null;\n            }\n            let c = new Matrix(this.w, this.h, this.array);\n            for (let i = 0; i < this.h; i++) {\n                for (let j = 0; j < this.w; j++) {\n                    c.array[i][j] -= b.array[i][j];\n                }\n            }\n            return c;\n        }\n        operatorMul(b) {\n            // console.log(this.size() == b.size());\n            if (typeof b == \"object\") {\n                if (b.type == \"Matrix\") {\n                    if (this.w != b.h) {\n                        console.error(new Error(\"Error 100: Matrix size does not match\"));\n                        return null;\n                    }\n                    let n = this.w;\n                    let c = new Matrix(this.h, b.w, 0);\n                    for (let i = 0; i < this.h; i++) {\n                        for (let j = 0; j < b.w; j++) {\n                            let sum = 0;\n                            for (let k = 0; k < n; k++) {\n                                sum += this.array[i][k] * b.array[k][j];\n                            }\n                            c.array[i][j] = sum;\n                        }\n                    }\n                    return c;\n                }\n                // if (b.type == \"Vector\") {\n                //\n                // }\n            } else {\n                let c = new Matrix(this.w, this.h, [].concat(this.array));\n                for (let i = 0; i < this.h; i++) {\n                    for (let j = 0; j < this.w; j++) {\n                        c.array[i][j] *= b;\n                    }\n                }\n                return c;\n            }\n        }\n        static identity(s) {\n            let matrix = new Matrix(s, s);\n            for (let i = 0; i < s; i++) {\n                matrix.array[i][i] = 1;\n            }\n            return matrix;\n        }\n        static Zero(w, h) {\n            return new Matrix(w, h);\n        }\n        static TransMove(d) {\n            return new Matrix(4, 4, [\n                [1,   0,   0,   0],\n                [0,   1,   0,   0],\n                [0,   0,   1,   0],\n                [d.x, d.y, d.z, 0],\n            ]);\n        }\n        static TransMoveInverse(d) {\n            return new Matrix(4, 4, [\n                [1,    0,    0,    0],\n                [0,    1,    0,    0],\n                [0,    0,    1,    0],\n                [-d.x, -d.y, -d.z, 0],\n            ]);\n        }\n        static TransScale(s) {\n            return new Matrix(4, 4, [\n                [s.x, 0,   0,   0],\n                [0,   s.y, 0,   0],\n                [0,   0,   s.z, 0],\n                [0,   0,   0,   1],\n            ]);\n        }\n        static TransScaleInverse(s) {\n            return new Matrix(4, 4, [\n                [1 / s.x, 0,       0,       0],\n                [0,       1 / s.y, 0,       0],\n                [0,       0,       1 / s.z, 0],\n                [0,       0,       0,       1],\n            ]);\n        }\n        static TransRotate(s) {\n            let Mx = new Matrix(4, 4, [\n                [1, 0,              0,             0],\n                [0, Math.cos(s.x),  Math.sin(s.x), 0],\n                [0, -Math.sin(s.x), Math.cos(s.x), 0],\n                [0, 0,              0,             1],\n            ]);\n            let My = new Matrix(4, 4, [\n                [Math.cos(s.y), 0, -Math.sin(s.y), 0],\n                [0,             1, 0,              0],\n                [Math.sin(s.y), 0, Math.cos(s.y),  0],\n                [0,             0, 0,              1],\n            ]);\n            let Mz = new Matrix(4, 4, [\n                [Math.cos(s.z),  Math.sin(s.z), 0, 0],\n                [-Math.sin(s.z), Math.cos(s.z), 0, 0],\n                [0,              0            , 1, 0],\n                [0,              0            , 0, 1],\n            ]);\n            return Mx * My * Mz;\n        }\n        static TransRotateInverse(s) {\n            let Mx = new Matrix(4, 4, [\n                [1, 0,              0,              0],\n                [0, Math.cos(s.x),  -Math.sin(s.x), 0],\n                [0, Math.sin(s.x),  Math.cos(s.x),  0],\n                [0, 0,              0,              1],\n            ]);\n            let My = new Matrix(4, 4, [\n                [Math.cos(s.y), 0, Math.sin(s.y),   0],\n                [0,             1, 0,               0],\n                [-Math.sin(s.y), 0, Math.cos(s.y),  0],\n                [0,             0, 0,               1],\n            ]);\n            let Mz = new Matrix(4, 4, [\n                [Math.cos(s.z),  -Math.sin(s.z), 0, 0],\n                [Math.sin(s.z), Math.cos(s.z),   0, 0],\n                [0,              0,              1, 0],\n                [0,              0,              0, 1],\n            ]);\n            return Mx * My * Mz;\n        }\n    }\n    class Matrix2x2 extends Matrix {\n        constructor(fill) {\n            super(2, 2, fill);\n        }\n        inverse() {\n            let tmp = 1 / this.det();\n            let c = new Matrix2x2([[this.array[1][1], -this.array[0][1]], [-this.array[1][0], this.array[0][0]]]);\n            c = c * tmp;\n            return c;\n        }\n        det() {\n            return this.array[0][0] * this.array[1][1] + this.array[0][1] * this.array[1][0];\n        }\n    }\n\n    /** todo 直线类 */\n    // 表示方法: 参数化直线\n    // 即: 起点, 终点, 方向\n    // p(x, y, z) = p0 + v_ * t\n    // t ∈ [-∞, +∞]\n    class Parmline2D extends See3D.LibraryDefineObject {\n        constructor(v0, v1) {\n            super(\"Parmline\");\n            this.p0 = new Vector2(v0);\n            this.p1 = new Vector2(v1);\n            this.v = new Vector2(v1 - v0);\n            this.v_ = this.v.norm();\n        }\n    }\n    class Parmline3D extends See3D.LibraryDefineObject {\n        constructor(v0, v1) {\n            super(\"Parmline\");\n            this.p0 = new Vector3(v0);\n            this.p1 = new Vector3(v1);\n            this.v = new Vector3(v1 - v0);\n            this.v_ = this.v.norm();\n        }\n    }\n\n    /** todo 平面类 */\n    // 表示方法: 点-法线形式\n    // a * (x - x0) + b * (y - y0) + c * (z - z0) = 0\n    // 或\n    // a * x + b * y + c * z + (-a * x0 - b * y0 - c * z0) = 0\n    class Plane3D extends See3D.LibraryDefineObject {\n        constructor(n, p0) {\n            super(\"Plane\");\n            this.n = new Vector3(n);// 法线向量\n            this.p0 = new Vector3(p0);// 平面上一点\n        }\n    }\n\n\n    /** todo 平面分割3D空间, 判断点位于哪个半空间中, -1为负半空间, 0为平面上, 1为正半空间 */\n    function PointPositionWithPlane(point, plane) {\n        let a = plane.n.x, b = plane.n.y, c = plane.n.z;\n        let hs = a * (point.x - plane.p0.x) + b * (point.y - plane.p0.y) + c * (point.z - plane.p0.z);\n        if (hs > 0) return 1;\n        if (hs < 0) return -1;\n        return 0;\n    }\n\n\n    /** todo 计算两参数化2D线段的交点 */\n    function intersParmlines2D(pl1, pl2) {\n        let p0 = pl1.p0;\n        let p2 = pl2.p0;\n        let a = p0.x, b = p0.y, c = p2.x, d = p2.y;\n        let p0v = pl1.v;\n        let p2v = pl2.v;\n        let e = p0v.x, f = p0v.y, g = p2v.x, h = p2v.y;\n        // console.log(a, b, c, d, e, f, g, h);\n        let t1 =\n            (h * (c - a) - g * (d - b))\n            /\n            (h * e - g * f)\n        ;\n        // let t2 =\n        //     (-c + a + e * t1)\n        //     /\n        //     g\n        // ;\n        let x = a + e * t1;\n        let y = b + f * t1;\n        return new Vector2(x, y);\n    }\n    /** todo 计算两参数化3D线段的交点 */\n    function intersParmlines3D(pl1, pl2) {\n        let p0 = pl1.p0;\n        let p2 = pl2.p0;\n        let a = p0.x, b = p0.y, c = p2.x, d = p2.y;\n        let p0v = pl1.v;\n        let p2v = pl2.v;\n        let e = p0v.x, f = p0v.y, g = p2v.x, h = p2v.y;\n        // console.log(a, b, c, d, e, f, g, h);\n        let t1 =\n            (h * (c - a) - g * (d - b))\n            /\n            (h * e - g * f)\n        ;\n        // let t2 =\n        //     (-c + a + e * t1)\n        //     /\n        //     g\n        // ;\n        let x = a + e * t1;\n        let y = b + f * t1;\n        let z = p0.z + p0v.z * t1;\n        return new Vector3(x, y, z);\n    }\n\n    const tInterval = new Interval(\"[0, 1]\");\n\n    /** todo 计算参数化直线与平面的交点 */\n    function intersParmlinePlane(plane, parmline) {\n        // console.log(parmline);\n        let {x: x0, y: y0, z: z0} = parmline.p0;\n        let {x: vx, y: vy, z: vz} = parmline.v;\n        let {x: a, y: b, z: c} = plane.n;\n        let d = -a * x0 - b * y0 - c * z0;\n        let t =\n            -(a * x0 + b * y0 + c * z0 + d)\n            /\n            (a * vx + b * vy + c * vz)\n        ;\n        console.log(-(a * x0 + b * y0 + c * z0 + d));\n        let x = x0 * vx * t;\n        let y = y0 * vy * t;\n        let z = z0 * vz * t;\n        return new Vector3(x, y, z);\n    }\n    /** todo 计算参数化线段与平面的交点 */\n    function intersSegmentPlane(parmline, plane) {\n        let {x: x0, y: y0, z: z0} = parmline.p0;\n        let {x: vx, y: vy, z: vz} = parmline.v;\n        let {x: a, y: b, z: c} = plane.n;\n        let d = -a * x0 - b * y0 - c * z0;\n        let t =\n            -(a * x0 + b * y0 + c * z0 + d)\n            /\n            (a * vx + b * vy + c * vz)\n        ;\n        if (!tInterval.have(t)) return null;\n        let x = x0 * vx * t;\n        let y = y0 * vy * t;\n        let z = z0 * vz * t;\n        return new Vector3(x, y, z);\n    }\n\n    /** todo 提供四元数类 */\n    class Quaternion extends See3D.LibraryDefineObject {\n        constructor(q0 = 0, q1 = 0, q2 = 0, q3 = 0) {\n            super(\"Quaternion\");\n            this.q0 = q0;\n            if (typeof q0 == \"object\" && arguments.length == 1) {// 复制构造函数\n                let q = q0;\n                this.q0 = q.q0;\n                this.qv = new Vector3(q.qv);\n            } else if (arguments.length == 2) {\n                this.qv = new Vector3(q1);\n            } else {\n                this.qv = new Vector3(q1, q2, q3);\n            }\n        }\n        operatorAdd(b) {\n            return new Quaternion(this.q0 + b.q0, this.qv + b.qv);\n        }\n        operatorSub(b) {\n            return new Quaternion(this.q0 - b.q0, this.qv - b.qv);\n        }\n        operatorMul(q) {\n            let p = this;\n            // let a = p.q0 * q.qv;\n            // let b = q.q0 * p.qv;\n            // let c = p.qv * q.qv;\n            let r = new Quaternion(\n                p.q0 * q.q0 - (p.qv % q.qv),\n                (q.qv * p.q0 + p.qv * q.q0 + p.qv * q.qv)\n            );\n            // console.log((p.q0 * q.qv + q.q0 * p.qv + p.qv * q.qv));\n            return r;\n        }\n        operatorDiv(b) {\n            if (typeof b == \"number\") {\n                let q = new Quaternion(this);\n                q.q0 /= b;\n                q.qv = q.qv / b;\n                return q;\n            }\n            if (b.type == \"Quaternion\") {\n                let b_ = b.reciprocal();\n                return this * b_;\n            }\n            if (typeof b == \"object\")\n                console.log(new Error(\"Error 102: Do not support \" + b.type + \" and vector for div operations\"));\n            else\n                console.log(new Error(\"Error 102: Do not support \" + (typeof b) + \" and vector for div operations\"));\n            return null;\n        }\n        inverse() {// 加法逆元素\n            return new Quaternion(-this.q0, -this.qv.x, -this.qv.y, -this.qv.z);\n        }\n        conjugate() {// 共轭四元数\n            return new Quaternion(this.q0, -this.qv.x, -this.qv.y, -this.qv.z);\n        }\n        mod() {\n            return Math.sqrt(\n                this.q0 * this.q0 +\n                this.qv.x * this.qv.x +\n                this.qv.y * this.qv.y +\n                this.qv.z * this.qv.z\n            );\n        }\n        mod2() {// 范数平方\n            return this.q0 * this.q0 +\n                this.qv.x * this.qv.x +\n                this.qv.y * this.qv.y +\n                this.qv.z * this.qv.z;\n        }\n        norm() {\n            return this / this.mod();\n        }\n        reciprocal() {// 倒数\n            return this.conjugate() / this.mod2();\n        }\n        static One() {// 乘法恒等元\n            return new Quaternion(1);\n        }\n        static Zero() {// 加法恒等元\n            return new Quaternion();\n        }\n        static RotateLine(v, theta, type) {// type为true是顺时针, 否则为逆时针\n            let V = new Quaternion(0, new Vector3(v));\n            let q = new Quaternion(\n                Math.cos(theta / 2),\n                Math.sin(theta / 2) * V.qv\n            );\n            if (type) {\n                return q * V.qv * q.reciprocal();\n            }\n            return q.reciprocal() * V.qv * q;\n        }\n        static RotateQuaternion(r) {\n            let x = this.__Q_x_theta(r.x);\n            let y = this.__Q_y_theta(r.y);\n            let z = this.__Q_z_theta(r.z);\n            return (z.Q_z_theta * y.Q_y_theta * x.Q_x_theta);\n        }\n        static __Q_x_theta(theta) {\n            let Q_x_theta = new Quaternion(Math.cos(theta / 2), Math.sin(theta / 2), 0, 0);\n            let q_theta = Math.cos(theta / 2), q_v = new Vector3(Math.sin(theta / 2), 0, 0);\n            return {Q_x_theta, q_theta, q_v};\n        }\n        static __Q_y_theta(theta) {\n            let Q_y_theta = new Quaternion(Math.cos(theta / 2), 0, Math.sin(theta / 2), 0);\n            let q_theta = Math.cos(theta / 2), q_v = new Vector3(0, Math.sin(theta / 2), 0);\n            return {Q_y_theta, q_theta, q_v};\n        }\n        static __Q_z_theta(theta) {\n            let Q_z_theta = new Quaternion(Math.cos(theta / 2), 0, 0, Math.sin(theta / 2));\n            let q_theta = Math.cos(theta / 2), q_v = new Vector3(0, 0, Math.sin(theta / 2));\n            return {Q_z_theta, q_theta, q_v};\n        }\n    }\n\n    /** todo 提供2D极坐标类 */\n    // 2D极坐标: x 代表 r, y 代表 theta\n    class Polar2D extends Vector2 {\n        constructor(r = 0, theta = 0) {\n            super(r ,theta);\n        }\n        get r() {\n            return this.get(0);\n        }\n        get theta() {\n            return this.get(1);\n        }\n        set r(n) {\n            this.set(0, n);\n            return n;\n        }\n        set theta(n) {\n            this.set(1, n);\n            return n;\n        }\n    }\n\n    /** todo 提供3D柱面坐标类 */\n    // 3D柱面坐标: x 代表 r, y 代表 theta, z 代表 z\n    class Cylindrical3D extends Vector3 {\n        constructor(r = 0, theta = 0, z = 0) {\n            super(r ,theta, z);\n        }\n        get r() {\n            return this.get(0);\n        }\n        get theta() {\n            return this.get(1);\n        }\n        set r(n) {\n            this.set(0, n);\n            return n;\n        }\n        set theta(n) {\n            this.set(1, n);\n            return n;\n        }\n    }\n    /** todo 提供3D球面坐标类 */\n    // 3D球面坐标: x 代表 rho, y 代表 phi, z 代表 theta\n    class Spherical3D extends Vector3 {\n        constructor(rho = 0, phi = 0, theta = 0) {\n            super(rho ,phi, theta);\n        }\n        get rho() {\n            return this.get(0);\n        }\n        get phi() {\n            return this.get(1);\n        }\n        get theta() {\n            return this.get(2);\n        }\n        set rho(n) {\n            this.set(0, n);\n            return n;\n        }\n        set phi(n) {\n            this.set(1, n);\n            return n;\n        }\n        set theta(n) {\n            this.set(2, n);\n            return n;\n        }\n    }\n\n    // 坐标转换\n    /** todo 2D极坐标转2D笛卡尔坐标 */\n    function polar2DToRect2D(polar) {\n        return new Vector2(polar.r * Math.cos(polar.theta), polar.r * Math.sin(polar.theta));\n    }\n    /** todo 2D笛卡尔坐标转2D极坐标 */\n    function rect2DToPolar2D(point) {\n        let d = (Math.atan(point.y / point.x));\n        return new Polar2D(Math.sqrt(point.x * point.x + point.y * point.y), String(d) === \"NaN\" ? 0 : d);\n    }\n    /** todo 3D柱面坐标转3D笛卡尔坐标 */\n    function cylindrical3DToRect3D(cylindrical) {\n        return new Vector3(cylindrical.r * Math.cos(cylindrical.theta), cylindrical.r * Math.sin(cylindrical.theta), cylindrical.z);\n    }\n    /** todo 3D笛卡尔坐标转3D柱面坐标 */\n    function rect3DToCylindrical3D(point) {\n        let d = (Math.atan(point.y / point.x));\n        return new Cylindrical3D(Math.sqrt(point.x * point.x + point.y * point.y), String(d) === \"NaN\" ? 0 : d, point.z);\n    }\n    /** todo 3D球面坐标转3D笛卡尔坐标 */\n    function spherical3DToRect3D(spherical) {\n        return new Vector3(\n            spherical.rho * Math.sin(spherical.phi) * Math.cos(spherical.theta),\n            spherical.rho * Math.sin(spherical.phi) * Math.sin(spherical.theta),\n            spherical.rho * Math.cos(spherical.phi)\n        );\n    }\n    /** todo 3D笛卡尔坐标转3D1球面坐标 */\n    function rect3DToSpherical3D(point) {\n        let d1 = (Math.atan(point.y / point.x));\n        let rho = Math.sqrt(point.x * point.x + point.y * point.y + point.z * point.z);\n        let d2 = (Math.acos(point.z / rho));\n        return new Spherical3D(\n            rho,\n            String(d1) === \"NaN\" ? 0 : d1,\n            String(d2) === \"NaN\" ? 0 : d2,\n        );\n    }\n\n    // 在库中定义所有的接口\n    lib.define(\"smallest\", smallest);\n    lib.define(\"smallestLen\", smallestLen);\n    lib.define(\"probably\", probably);\n\n    lib.define(\"Enum\", Enum);\n    lib.define(\"MathSet\", MathSet);\n    lib.define(\"Interval\", Interval);\n\n    lib.define(\"Vector\", Vector);\n    lib.define(\"Vector2\", Vector2);\n    lib.define(\"Polar2D\", Polar2D);\n    lib.define(\"Vector3\", Vector3);\n    lib.define(\"Vector4\", Vector4);\n\n    lib.define(\"Matrix\", Matrix);\n    lib.define(\"Matrix2x2\", Matrix2x2);\n\n    lib.define(\"Parmline2D\", Parmline2D);\n    lib.define(\"Parmline3D\", Parmline3D);\n    lib.define(\"Plane3D\", Plane3D);\n    lib.define(\"PointPositionWithPlane\", PointPositionWithPlane);\n    lib.define(\"intersParmlines2D\", intersParmlines2D);\n    lib.define(\"intersParmlines3D\", intersParmlines3D);\n    lib.define(\"intersParmlinePlane\", intersParmlinePlane);\n    lib.define(\"intersSegmentPlane\", intersSegmentPlane);\n\n    lib.define(\"Quaternion\", Quaternion);\n\n    lib.define(\"Polar2D\", Polar2D);\n    lib.define(\"Cylindrical3D\", Cylindrical3D);\n    lib.define(\"Spherical3D\", Spherical3D);\n\n    lib.define(\"polar2DToRect2D\", polar2DToRect2D);\n    lib.define(\"rect2DToPolar2D\", rect2DToPolar2D);\n    lib.define(\"cylindrical3DToRect3D\", cylindrical3DToRect3D);\n    lib.define(\"rect3DToCylindrical3D\", rect3DToCylindrical3D);\n    lib.define(\"spherical3DToRect3D\", spherical3DToRect3D);\n    lib.define(\"rect3DToSpherical3D\", rect3DToSpherical3D);\n\n    lib.trans();// 在库的全局添加接口\n    See3D.library(lib);// 将库加载入See3D中\n    See3D.load(\"Math3D\");// 将库加入See3D的默认加载队列\n    See3D.loadGlobal(\"Math3D\");// 将库加入浏览器全局\n    lib.global();// 将库API加入浏览器全局\n    See3D.lib(\"Math3D\");\n    lib.toSee3D();\n}(See3D);"]}