{"version":3,"sources":["../src/IO.js"],"names":["lib","See3D","Library","sstream","str","b","LibraryDefineObject","sostream","see3d","size","font","color","__see3d","__ctx","ctx","x","y","__size","__font","__color","fillStyle","startX","startY","update","n","undefined","f","textAlign","textBaseline","words","split","i","length","fillText","measureText","define","trans","library","load","DEBUG","loadGlobal","global"],"mappings":"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","file":"IO.js","sourcesContent":["'bpo enable';\n\n!function () {\n    let lib = new See3D.Library(\"IO\");// 生成一个新的See3D库\n\n    class sstream extends See3D.LibraryDefineObject {\n        constructor() {\n            super(\"Stream\");\n            this.str = \"\";\n        }\n        operatorBinaryLShift(b) {\n            this.str += b;\n            return this;\n        }\n        operatorBinaryRShift(b) {\n            b << this.str;\n            return this;\n        }\n    }\n\n    class sostream extends sstream {\n        constructor(see3d, size = 10, font = \"sans-serif\", color = \"#fff\") {\n            super();\n            this.__see3d = see3d;\n            this.__ctx = see3d.ctx;\n            this.x = 0;\n            this.y = 0;\n            this.__size = size;\n            this.__font = font;\n            this.__color = color;\n            this.__ctx.fillStyle = color;\n            this.startX = 0;\n            this.startY = 0;\n            this.update();\n        }\n        size(n) {\n            if (n === undefined) return this.__size;\n            if (this.__size > n)\n                this.y += this.__size - n;\n            this.__size = n;\n            this.update();\n            return this;\n        }\n        font(f) {\n            if (f === undefined) return this.__font;\n            this.__font = f;\n            this.update();\n            return this.__font;\n        }\n        update() {\n            this.__ctx.font = `${this.size()}px ${this.font()}`;\n        }\n        reset() {\n            this.x = this.startX;\n            this.y = this.startY;\n        }\n        operatorBinaryLShift(b) {\n            this.update();\n            this.str += b;\n            this.__ctx.textAlign = \"left\";\n            this.__ctx.textBaseline = \"top\";\n            this.__ctx.fillStyle = this.__color;\n            // console.log(this.size(), this.__ctx);\n            let words = b.split(\"\\n\");\n            for (let i = 0; i < words.length; i++) {\n                this.__ctx.fillText(words[i], this.x, this.y);\n                if (i == words.length - 1)\n                    this.x += this.__ctx.measureText(words[i]).x;\n                else {\n                    this.x = this.startX;\n                    this.y += this.__ctx.measureText(words[i]).y;\n                }\n            }\n            return this;\n        }\n    }\n\n    lib.define(\"sstream\", sstream);\n    lib.define(\"sostream\", sostream);\n\n    lib.trans();\n    See3D.library(lib);\n    See3D.load(\"IO\");\n    if (See3D.DEBUG) See3D.loadGlobal(\"IO\");\n    if (See3D.DEBUG) lib.global();\n    See3D.lib(\"IO\");\n}();"]}